# nanoFramework ESP32-S3 W5500 调试器配置补丁

# 在Release模式下禁用调试器库
if(NOT NF_FEATURE_DEBUGGER OR NF_FEATURE_DEBUGGER STREQUAL "OFF")
    message(STATUS "调试器功能已禁用 - 跳过NF_Debugger库")
    
    # 创建一个空的调试器目标以避免依赖问题
    if(NOT TARGET NF_Debugger)
        add_custom_target(NF_Debugger)
        add_custom_command(TARGET NF_Debugger COMMAND echo "调试器库已禁用")
    endif()
    
    # 定义空变量
    set(NF_Debugger_SOURCES "")
    set(NF_Debugger_INCLUDE_DIRS "")
else()
    message(STATUS "调试器功能已启用")
endif()

# 确保所有必需的ESP32库存在
if(NOT TARGET esp32)
    message(STATUS "创建ESP32兼容目标...")
    add_library(esp32 INTERFACE)
    target_link_libraries(esp32 INTERFACE idf::esp32)
endif()

# 添加W5500以太网支持
if(ESP32_ETHERNET_SUPPORTED)
    message(STATUS "W5500以太网支持已启用")
    add_definitions(-DESP32_ETHERNET_SUPPORTED=1)
endif()